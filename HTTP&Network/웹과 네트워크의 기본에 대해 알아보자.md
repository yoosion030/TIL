# 1.1 웹은 HTTP로 나타낸다.

웹 브라우저 주소 입력란에 URL을 입력했을 때 웹 페이지가 보여지는 과정

1. 클라이언트 : 브라우저 주소 입력란에 URL을 입력하여 어딘가에 송신
2. 어딘가에서 응답이 돌아오면 웹 페이지가 표시됨

아무것도 없는데 웹 페이지가 표시될 수는 없습니다.
웹 브라우저는 웹 브라우저 주소 입력란에 지정된 URL에 의지해서 웹 서버로부터 **리소스**라고 불리는 파일 등의 정보를 얻고 있는 것입니다.
이 때, 서버에 의뢰를 하는 웹 브라우저 등을 **클라이언트**라고 부릅니다.

```
1. 클라이언트 : 주소로 지정한 서버의 리소스를 가지러 간다.
2. 서버 : HTTP를 사용한 통신
```

이렇게 클라이언트에서 서버까지 일련의 흐름을 결정하고 있는 것은 웹에서 **HTTP**이라 불리는 프로토콜입니다.

> 프로토콜의 의미는 "약속"입니다. 즉, 웹은 HTTP라는 약속을 사용한 통신으로 이루어져 있습니다.

# 1.2 HTTP(HyperText Transfer Protocol)

## 1.2.1 웹은 지식 공유를 위해 고안되었다.

WWW(World Wide Web)를 구성하는 기술로서, 문서 기술 언어로는 SGML을 베이스로 한 HTML(HyperText Markup Language), 문서 전송 프로토콜로는 HTTP, 문서의 주소를 지정하는 방법으로 URL(Uniform Resource Locator)등 세가지가 되었습니다.

WWW는 지금으로 말하자면 웹 브라우저, 그 당시에는 하이퍼텍스트를 열람할 수 있는 클라이언트 애플리케이션의 명칭이었습니다. 이것이 현재헤는 이러한 일련의 시스템의 명칭으로 사용되어 WWW혹은 단순히 웹(Web)이라 불리고 있습니다.

# 1.3 네트워크의 기본은 TCP/IP

HTTP를 이해하기 위해서는 TCP/IP 프로토콜에 대해 어느정도 알고 있어야 할 필요가 있습니다. 인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있습니다. HTTP는 그중 하나입니다.

## 1.3.1 TCP/IP는 프로토콜의 집합

컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 서로 같은 방법으로 통신하지 않으면 안됩니다. 예를 들면, 어떻게 상대를 찾고, 어떻게 상대에게 이야기를 시작하고, 어떠한 언어로 이야기를 하며, 어떻게 이야기를 종료할 까와 같은 규칙을 결정할 필요가 있습니다. 이렇게 서로 다른 하드웨어와 운영체제 등을 가지고 서로 통신을 하기 위해서는 모든 요소에 규칙이 필요하게 됩니다. 이러한 규칙을 **프로토콜**이라고 부릅니다.

프로토콜에는 여러가지가 있습니다. 케이블 규격이랑 IP주소 지정 방법, 떨어진 상대를 찾기 위한 방법과 그 곳에 도달하는 순서, 그리고 웹을 표시하기 위한 순서 등입니다.

이렇게 인터넷과 관련된 프로토콜들을 모은 것을 **TCP/IP**라고 부릅니다. TCP와 IP프로토콜을 가리켜 TCP/IP라고 부르기도 하지만, IP 프로토콜을 사용한 통신에서 사용되고 있는 프로토콜을 총칭해서 TCP/IP라는 이름이 사용되고 있습니다.

## 1.3.2 계층으로 관리하는 TCP/IP

TCP/IP에서 중요한 개념 중 하나가 **계층**입니다. TCP/IP는 '애플리케이션 계층', '트랜스포트 계층', '네트워크 계층', '링크계층' 이렇게 4계층으로 나뉘어 있습니다. TCP/IP가 계층화 된 것은 메리트가 있기 때문입니다. 예를 들면, 인터넷이 하나의 프로토콜로 되어 있다면 어디선가 사양이 변경되었을 때 전체를 바꾸지 않으면 안되지만, 계층화되어 있으면 사양이 변경된 해당 계층만 바꾸면 됩니다. 각 계층은 계층이 연결되어 있는 부분만 결정되어 있어, 각 계층의 내부는 자유롭게 설계할 수 있습니다.
또한, 계층화하면 설계를 편하게 할 수 있습니다. 애플리케이션 층에서 애플리케이션은 자기 자신이 담당하는 부분을 고려하면 되고, 상대가 어디에 있는지, 어떠한 루트로 메시지를 전달하는지, 전달한 메시지가 확실하게 전달되고 있는지 같은 고려를 하지 않아도 됩니다.

### TCP/IP 각 계층의 역할

- 애플리케이션 계층

애플리케이션 계층은 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정하고 있습니다. TCP/IP에는 여러가지의 공통 애플리케이션이 준비되어 있습니다. 예를 들면, FTP랑 DNS등도 애플리케이션의 한 가지 입니다. HTTP도 이 계층에 포함됩니다.

- 트랜스포트 계층

트랜스포트 계층은 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공합니다. 트랜스포트 계층에서는 서로 다른 성질을 가진 TCP(Transmission Control Protocol)와 UDP(User Data Protocol) 두가지 프로토콜이 있습니다.

- 네트워크 계층(인터넷 계층)

네트워크 계층은 네트워크 상에서 패킷의 이동을 다룹니다.

> 패킷이란 전송하는 데이터의 최소 단위

이 계층에서는 어떠한 경로를 거쳐 상대의 컴퓨터까지 패킷을 보낼지를 결정하기도 합니다. 인터넷의 경우라면 상대 컴퓨터에 도달하는 동안에 여러 대의 컴퓨터랑 네트워크 기기를 거쳐서 상대방에게 배송됩니다. 그러한 여러 가지 선택지 중에서 하나의 길을 결정하는 것이 네트워크 계층의 역할입니다.

- 링크 계층 (데이터 링크, 네트워크 인터페이스 계층)

네트워크에 접속하는 하드웨어적인 면을 다룹니다. 운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑 네트워크 인터페이스 카드를 포함합니다. 그리고 케이블 등과 같이 물리적으로 보이는 부분도 포함합니다. 하드웨어적 측면은 모두 링크계층의 역할입니다.

## 1.3.3 TCP/IP 통신의 흐름

TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 합니다. **송신하는 측은 애플리케이션 계층에서부터 내려가고, 수신하는 측은 애플리케이션 계층으로 올라갑니다.**

HTTP를 예로 들어 설명하면 먼저 송신 측 클라이언트의 애플리케이션 계층에서 어느 웹 페이지를 보고싶다 라는 HTTP 리퀘스트를 지시합니다. 그 다음에 있는 트랜스포트 계층에서는 애플리케이션 계층에서 받은 데이터를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달합니다.

네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달합니다. 이로써 네트워크를 통해 송신할 준비가 되었습니다.

수신측 서버는 링크계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달합니다. 애플리케이션 계층에 도달하게 되면 드디어 클라이언트가 발신했던 HTTP 리퀘스트 내용을 수신할 수 있습니다.

각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가합니다. 반대로 수신측에서는 각 계층을 거칠 때마다 반드시 해당 계층마다 사용한 헤더를 삭제합니다.

이렇게 정보를 감싸는 것을 **캡슐화**라고 부릅니다.

# 1.4 HTTP와 관계가 깊은 프로콭톨은 IP/TCP/DNS

## 1.4.1 배송을 담당하는 IP

IP(Internet Protocol)는 계층으로 말하자면 **네트워크 층**에 해당됩니다. IP는 TCP/IP라는 명칭의 일부가 될 정도로 중요한 프로토콜입니다. `IP`와 `IP주소`를 혼동하는 사람이 있는데 `IP`는 프로토콜의 명칭입니다.

IP의 역할은 **개개의 패킷을 상대방에게 전달하는 것**입니다. 상대방에게 전달하기까지 여러 가지 요소가 필요합니다. 그중에서도 IP주소와 MAC(Media Access Control Address) 주소라는 요소가 중요합니다.

IP주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유의 주소입니다. IP주소는 MAC 주소와 결부됩니다. IP주소는 변경이 가능하지만 기본적으로 MAC주소는 변경할 수 없습니다.

### 통신은 ARP를 이용하여 MAC주소에서 한다.

IP 통신은 MAC주소에 의존해서 통신을 합니다. 인터넷에서 통신 상대가 같은 랜선 내에 있을 경우는 적어서 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착합니다. 그렇게 중계하는 동안에는 다음으로 중계할 곳의 MAC주소를 사용하여 목적지를 찾아가는 것입니다.
이 때 **ARP(Address Resolution Protocol)** 이라는 프로토콜이 사용됩니다.

ARP는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 IP주소를 바탕으로 MAC 주소를 조사할 수 있습니다.

### 그 누구도 인터넷 전체를 파악하고 있지는 않다.

목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만을 알고 있습니다.

이 시스템을 **라우팅**이라고 부르는데 택배 배송과 흡사합니다. 화물을 보내는 사람은 택배 집배소 등에 화물을 가지고 가면 택배를 보낼 수 있는 것만 알고 있으며, 집배소는 화물을 보내는 곳을 보고 어느 지역의 집배소에 보내면 되는지만 알고 있습니다. 그리고 목적지에 있는 집배소는 어느 집에 배달하면 되는지만 알고 있습니다. 결국, 어떤 컴퓨터나 네트워크 기기도 인터넷 전체를 상세하게 파악하고 있지 못하다는 것입니다.
