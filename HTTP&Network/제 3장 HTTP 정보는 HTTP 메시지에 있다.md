# 3.1 HTTP 메시지

HTTP에서 교환하는 정보는 HTTP 메시지라고 불리는데 리퀘스트 측 HTTP 메시지를 리퀘스트 메시지, 리스폰스 측 HTTP 메시지를 리스폰스 메시지라 부릅니다.

HTTP 메시지는 복수 행의 데이터로 구성된 텍스트 문자열입니다. HTTP 메시지는 크게 구분하면 **메시지 헤더** 와 **메시지 바디**로 구성되어 있고, 최초에 나타나는 개행 문자로 메시지 헤더와 메시지 바디를 구분합니다. 이안에 메시지 바디가 항상 존재한다고는 할 수 없습니다.

# 3.2 리퀘스트 메시지와 리스폰스 메시지의 구조

리퀘스트 메시지와 리스폰즈 메시지의 구조를 살펴 보도록 합시다.

리퀘스트 메시지와 리스폰스 메시지의 메시지 헤더 내부는 다음과 같은 데이터로 구성되어 있습니다.

- 리퀘스트 라인
  리퀘스트에 사용하는 메소드와 리퀘스트 URI와 사용하는 HTTP 버전이 포함됩니다.

- 상태 라인
  리스폰스 결과를 나타내는 상태 코드와 설명, 사용하는 HTTP 버전이 포함됩니다.

- 헤더 필드
  리퀘스트와 리스폰스의 여러 조건과 속성 등을 나타내는 각종 헤더 필드가 포함됩니다. 일반 헤더 필드, 리퀘스트 헤더 필드, 리스폰스 헤더 필드, 엔티티 헤더 필드 등 4종류가 있습니다.

# 3.3 인코딩으로 전송 효율을 높이다.

HTTP로 데이터를 전송할 경우 그대로 전송할 수도 있지만 전송할 때에 인코딩(변환)을 실시함으로써 전송 효율을 높일 수 있습니다.

전송할 때 인코딩을 하면 다량의 엑세스를 효율 좋게 처리할 수 있습니다. 단지, 컴퓨터에서 인코딩 처리를 해야 하기 때문에 CPU 등의 리소스는 보다 많이 소비하게 됩니다.

## 3.3.1 메시지 바디와 엔티티 바디의 차이

- 메시지 (message)

HTTP 통신의 기본 단위로 옥텟 시퀀스로 구성되고 통신을 통해서 전송됩니다.

- 엔티티 (entity)

리퀘스트랑 리스폰스의 페이로드로 전송되는 정보로 엔티티 헤더 필드와 엔티티 바디로 구성됩니다.

HTTP 메시지 바디의 역할은 리퀘스트랑 리스폰스에 관한 엔티티 바디를 운반하는 일입니다. 기본적으로 메시지 바디와 엔티티 바디는 같지만 전송 코딩이 적용된 경우에는 엔티티 바디의 내용이 변하기 때문에 메시지 바디와 달라집니다.

## 3.3.2 압축해서 보내는 콘텐츠 코딩

메일에 파일을 첨부해서 보낼 경우 같이 용량을 줄이기 위해서 파일을 zip으로 압축하고 나서 첨부해서 보내는 일이 있습니다. HTTP 에는 이와 같은 일이 가능한 **콘텐츠 코딩 (Content Codings)**이라고 불리는 기능이 구현되어 있습니다.

> 콘텐츠 코딩이란 엔티티에 적용하는 인코딩을 가르키는데 엔티티 정보를 유지한채로 압축합니다. 콘텐츠 코딩된 엔티티는 수신한 클라이언트 측에서 디코딩합니다.

## 3.3.3 분해해서 보내는 청크 전송 코딩

HTTP 통신에서는 리퀘스트했었던 리소스 전부에서 엔티티 바디의 전송이 완료되지 않으면 브라우저에 표시되지 않습니다. 사이즈가 큰 데이터를 전송하는 경우에 데이터를 분할해서 조금씩 표시할 수 있습니다.

이렇게 엔티티 바디를 분할하는 기능을 **청크 전송 코딩(Chunked transfer Coding)**이라고 부릅니다.
