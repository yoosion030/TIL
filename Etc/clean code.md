# 실무에서 바로 쓰는 Frontend Clean Code

[토스 | SLASH 21 - 실무에서 바로 쓰는 Frontend Clean Code](https://toss.im/slash-21/sessions/3-3) 영상을 보고 정리한 글입니다.

## 실무에서의 클린 코드 의의

> 유지보수 시간의 단축

그 코드는 안 건드리시는 게 좋을 거예요. 일단 제가 만질게요. ^^;;
=> 흐름 파악이 어렵고/ 도메인 맥락 표현이 안 되어/ 동료에게 물어봐야 알 수 있는 코드

읽기 좋은 코드는 코드 리뷰 시간도 줄어들고 버그가 났을 때 디버깅 시간도 단축한다.

`시간 = 자원 = 돈`

처음 상태에서 기능 개발하는 것은 쉽다. 하지만 기존 코드에 기능을 추가하는 상황이라면 조금 달라진다.

## 안일한 코드 추가의 함정

안일하게 코드를 추가한다면?

- 기존의 코드에서 기능을 추가한다면 하나의 목적인 코드가 흩뿌려져 있을 것이다.
- 이러면 나중에 코드를 볼 때 위아래로 스크롤을 하며 미로 찾기를 해야 한다.
- 그리고 하나의 함수가 여러 가지 일하고 있다.
- 세부 구현을 모두 읽어야 함수의 역할을 알 수 있게 된다.
- 코드 추가 및 삭제도 시간이 더 걸리게 된다.
- 함수의 세부 구현 단계가 제각각이다.
- 코드를 이상하게 지레짐작하게 된다.

그때는 맞고 지금은 틀리다. 깔끔했던 코드가 작은 기능 하나를 추가했더니 어지러운 코드가 되었다. 여기에서 함정은 풀 리퀘스트에서 `file changes`를 보면 이게 어지러운 코드라는 걸 파악하기 어려웠을 것이다. 왜냐하면 변경 점 자체에는 틀린 점이 없기 때문이다.

### 해결 방법

**큰 그림을 보며 코드 리팩토링을 하자.**

- 함수 세부 구현 단계 통일
- 하나의 목적인 코드는 뭉쳐두기 (컴포넌트화하자)
- 함수가 한 가지 일만 하도록 쪼개기

```
클린 코드 != 짧은 코드
클린 코드 == 원하는 로직을 빠르게 찾을 수 있는 코드
```

**원하는 로직을 빠르게 찾으려면?**

- 하나의 목적을 가진 코드가 흩뿌려져 있을 때 응집도를 높여서 뭉쳐두어야 한다.
- 함수가 여러 가지 일하고 있을 때 단일 책임 원칙에 따라 쪼개 줘야 한다.
- 함수의 세부 구현 단계가 제각각일 때는 추상화 단계를 조정해서 핵심 개념을 필요한 만큼만 노출해야 한다.

## 로직을 빠르게 찾을 수 있는 코드

### 1. 응집도

> 같은 목적인 코드는 뭉쳐두자.

문제점 : 하나의 기능이지만 코드는 여기저기

1. 커스텀 훅을 사용해서 한 군데로 뭉치기
   오히려 어려워진 코드 파악 (커스텀 훅의 대표적인 안티 패턴)
2. 무엇을 뭉쳐야 하는가?
   당장 몰라도 되는 디테일
3. 무엇을 뭉치면 안 되는가?
   코드 파악에 필수적인 핵심 정보  
    이러한 정보들을 분리해놓으면 여러 모듈을 넘나들며 흐름을 따라가야 하는 참사가 일어난다.  
   뭉쳐서 짧은 코드로 만든다고 코드가 깨끗해지는 게 아니다.

코드 응집 Tip : 핵심 데이터와 세부 구현 나누기

1. 먼저 남겨야 할 핵심 데이터와 숨겨도 될 세부 구현을 나눈다.
2. 커스텀 훅 안에 모든 코드를 다 숨기는 게 아니라 세부 구현만 숨겨놓고, 핵심 데이터만 바깥에서 넘긴다.
   세부 구현을 읽지 않고도 어떤 팝업인지 파악할 수 있다.

**선언적 프로그래밍**

> "무엇을 해야 할지만 알려줘, 세무 구현은 미리 해놨거든."

특징

- '무엇'을 하는 함수인지 빠르게 이해가 가능함
- 세부 구현은 안쪽에 뭉쳐두어서 신경 쓸 필요가 없음
- '무엇'만 바꿔서 쉽게 재사용할 수 있음

**명령형 프로그래밍**

> 하나하나 세부 구현을 작성한 방식

세부 구현이 모두 노출되어 있어 이를 커스텀 하기 쉽지만, 읽는 데 오래 걸리고 재사용하기 어렵다는 단점이 있다.

선언적 프로그래밍이 명령형 프로그래밍보다 최신 트렌드여서 더 좋다는 것은 아니다. 선언적인 코드가 무조건 좋은 것이 아니기 때문에 두 방법 모두 유동적으로 사용해야 한다.

### 2. 단일 책임

1. 함수 이름을 지어 보자.
   중요 포인트가 모두 담기지 않은 함수명은 위험하다.
   이러한 함수 이름은 읽는 이가 예상한 대로 코드가 동작하지 않으며, 이는 코드에 대한 신뢰 하락으로 이어진다. 그다음부터는 함수명을 믿지 못하고 세부 구현을 모두 의심 가득한 눈초리로 보게 된다.
2. 기능 추가 시 함수는 더욱 잡탕이 된다.
   이미 있는 함수에 기능을 추가만 하는 행동이 계속 반복이 된다면 이러한 말이 미래에 우리가 하게 될 말이다. "그 코드는 안 건드리시는 게 좋을 거예요. 일단 제가 만질게요. ^^;;"

**리펙토링 Tip 1** 한 가지 일만 하는, 명확한 이름의 함수

한 가지 일만 하는 함수를 만들자.

**리펙토링 Tip 2** 한 가지 일만 하는, 기능성 컴포넌트

리액트 컴포넌트로 기능을 분리할 수도 있다.

**리펙토링 Tip 3** 조건이 많아지면 한글 이름도 유용하다.

이름 짓기가 복잡하다면, 한글 변수명을 써보는 것도 유용하다.

ex ) '실시간 상담 완료', '연결 고객 5명 미만'
도메인이 복잡해서 영어 이름을 길게 짓는 게 오히려 복잡도를 높일 때,
상수를 직관적으로 보고 싶을 때, 복잡한 조건문이 많아질 때 매우 유용하다.
마치 주석을 달아둔 것과 같은 효과도 낸다.

### 3. 추상화

> 핵심 개념을 뽑아내자.

코드를 제로부터 구현 후 중요 개념만 남기고 추상화하자.

**얼마나 추상화할 것인가?**  
정답은 없다. 상황에 따라 필요한 만큼만 추상화하면 된다.

**추상화 수준이 섞여 있으면 코드 파악이 어려워진다.**  
구체적으로 작성되어있는 컴포넌트를 보고 추상화된 컴포넌트도 충분히 구체적으로 작성되어있다고 짐작할 수도 있기 때문이다. 추상화 단계를 비슷하게 정리해주면 물 흐르듯이 파악할 수 있다.

## 액션 아이템

### 1. 담대하게 기존 코드 수정하기

> 두려워하지 말고 기존 코드를 씹고 뜯고 맛보고 즐기자.

구조 뜯기를 두려워하면, 클린 한 실무 코드를 유지할 수 없다.

### 2. 큰 그림 보는 연습하기

> 그때는 맞고 지금은 틀리다. 기능 추가 자체는 클린해도, 전체적으로는 어지러울 수 있다.

### 3. 팀과 함께 공감대 형성하기

> 코드에는 정답이 없다. 명시적으로 이야기를 하는 시간이 필요하다.

당장은 사소한 이슈이기 때문에 코드 리뷰 단계에서 언급을 생략할 수도 있다. 하지만 사소하지만, 일관성을 깨는 코드가 쌓이면 유지 보수하기 힘든 코드가 된다.

공감대는 자동으로 만들어지지 않는다. 명시적으로 이야기를 하는 시간이 필요하다.

### 4. 문서로 적어보기

> 글로 적어야 명확해진다.

클린 코드는 모호한 개념이다. 글로 정리해야 명확해진다. 이 코드가 어떤 점에서 향후 위험할 수 있는지, 어떻게 개선할 수 있는지 나만의 원칙을 적어보자.
